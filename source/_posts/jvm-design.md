---
title: JVM虚拟机内存结构
date: 2019.11.26
tags: 
  - Java 
  - JVM
  
description: 
---

![内存结构图](https://suyu-img.oss-cn-shenzhen.aliyuncs.com/%E8%99%9A%E6%8B%9F%E6%9C%BA%E5%86%85%E5%AD%98%E6%9C%BA%E6%9E%84.png)

- 堆（Heap）

堆区是JVM中所有线程共享的，它是JVM用来存储对象实例以及数组的区域，可以认为Java中所有的对象的内存都在此分配，Heap中的对象的内存
需要等待GC进行回收。对象在创建的时候，优先分配到年轻代的`Eden区`，如果对象为大对象，则直接将对象分配到`老年代`。如果`Eden区`内存不足，
则堆区就会进行一次`Monor GC`,存活的对象将会放到幸存区(Survivor区)。

- 方法区

方法区也是JVM中所有线程共享的，存放了所有加载的类的信息(名称，方法信息，字段信息) 类中的静态变量、类中的常量，当开发人员在程序中通过Class对象中的get方法。isInteface等
方法来获取信息时，这些数据都来源于方法区域。

- 本地方法区

本地方法区数据是线程独占的，本地方法栈与Java栈的作用和原理非常相似。区别只不过是Java栈是为执行Java方法服务的，而本地方法栈视为执行本地方法(Native Method)
服务的。

- PC寄存器(程序计数器)

PC寄存器是线程独占的，PC寄存器的作用就是给每个线程提供一个独立的运算空间，不受其他线程的影响，由于程序计数器中程序
计数器存储的数据所占空间的大小不会随着程序的执行而发生改变，因此程序计数器不会发生内存溢出的现象。

- 虚拟机栈

Java栈中存放的是一个个的栈帧，每个栈帧对应一个被调用的方法，在栈帧中包括局部变量表（Local Variables）、操作数栈（Operand Stack）、指向当年方法所属的类的运行时
常量池的引用、方法返回地址和一些额外的附加信息。当执行一个方法时，就会随之创建一个对应的栈帧，并将建立的栈帧压栈。当方法执行完毕之后，变回将栈帧出栈。